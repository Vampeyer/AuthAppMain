<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Premium Content</title>
  <base href="/streampaltest/public/">
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>

    <nav>
    <a href="index.html">Home</a> |
    <a href="signup.html">Sign Up</a> |
    <a href="login.html">Login</a> |
    <a href="profile.html">Profile</a> |

<!-- Just a regular link! Cookie sent automatically -->
<a href="https://authappmain.onrender.com/subscriptions/premium.html">Premium</a>
  </nav>


  <div class="container" id="premium" style="display:none">
    <h1>PREMIUM UNLOCKED</h1>
    <p>Congratulations! You have full access.</p>
  </div>

<script>
const BACKEND_URL = 'https://authappmain.onrender.com';

async function getHeaders() {
  const token = localStorage.getItem('token');
  return token ? { 'Authorization': `Bearer ${token}` } : {};
}

fetch(`${BACKEND_URL}/api/me`, { headers: await getHeaders() })
  .then(r => r.ok ? r.json() : Promise.reject())
  .then(u => {
    if (u.subscription_active) {
      document.getElementById('premium').style.display = 'block';
    } else {
      alert('Subscription required');
      location.href = 'profile.html';
    }
  })
  .catch(() => location.href = 'login.html');
</script>
</body>
</html>