<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Premium Content</title>
  <base href="/streampaltest/public/">
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <nav>
    <a href="index.html">Home</a> | <a href="profile.html">Profile</a> | <a href="subscriptions/premium.html">Premium</a>
  </nav>
  <div class="container" id="premium" style="display:none">
    <h1>PREMIUM UNLOCKED</h1>
    <p>Congratulations! You have full access.</p>
  </div>

<script>
const BACKEND_URL = 'https://authappmain.onrender.com';
try {
fetch(`${BACKEND_URL}/api/me`, { credentials: 'include' })
  .then(r => r.ok ? r.json() : Promise.reject('Not logged in or unauthorized'))
  .then(u => {
    if (u.subscription_active) {
      document.getElementById('premium').style.display = 'block';
    } else {
      alert('This is premium content—subscribe to access!');
      location.href = 'profile.html';  // Optional: redirect after alert
    }
  })
  .catch(err => {
    alert('This is premium content—login and subscribe to access!');
    location.href = 'login.html';  // Optional: redirect after alert
  });
}
catch { alert('Connection did not retrieve results') }
</script>
</body>
</html>